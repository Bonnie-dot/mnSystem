(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{726:function(e,t,l){"use strict";l.r(t);l(100);var n={layout:"default",data:function(){return{count:[0,1,2],name:"",url:"",modal:!1,list:[],formValidate:{name:"",url:"",author:""},ruleValidate:{name:[{required:!0,message:"友链名不能为空",trigger:"blur"}],url:[{required:!0,message:"友链地址不能为空",trigger:"blur"}],author:[{required:!0,message:"友链所属人不能为空",trigger:"blur"}]}}},created:function(){this.getData()},methods:{handleAdd:function(){this.modal=!0},handleClose:function(e){var t=this;this.$axios.post("/admin/link/deleteLink",{id:e}).then(function(e){t.$Message.success(e.data.msg),t.getData()})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(l){l&&t.$axios.post("/admin/link/insertLink",t.formValidate).then(function(l){t.$Message.success(l.data.msg),t.$refs[e].resetFields(),t.modal=!1,t.getData()})})},handleReset:function(e){this.$refs[e].resetFields(),this.modal=!1},getData:function(){var e=this;this.list=[],this.$axios.get("/admin/link/queryLink").then(function(t){e.list=t.data.res})}},head:function(){return{title:"友链"}}},r=l(30),component=Object(r.a)(n,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[e._l(e.list,function(t){return l("Tag",{key:t.id,attrs:{name:t.link_name,closable:""},on:{"on-close":function(l){return e.handleClose(t._id)}}},[e._v(e._s(t.link_name))])}),e._v(" "),l("Button",{attrs:{icon:"ios-add",type:"dashed",size:"small"},on:{click:e.handleAdd}},[e._v("添加友链")]),e._v(" "),l("Modal",{attrs:{draggable:"",scrollable:"",title:"新建友链","footer-hide":!0},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[l("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[l("FormItem",{attrs:{label:"友链名",prop:"name"}},[l("Input",{attrs:{placeholder:"请输入友链名"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),l("FormItem",{attrs:{label:"友链网页地址",prop:"url"}},[l("Input",{attrs:{placeholder:"请输入友链友链地址"},model:{value:e.formValidate.url,callback:function(t){e.$set(e.formValidate,"url",t)},expression:"formValidate.url"}})],1),e._v(" "),l("FormItem",{attrs:{label:"友链所属人",prop:"author"}},[l("Input",{attrs:{placeholder:"请输入友链所属人"},model:{value:e.formValidate.author,callback:function(t){e.$set(e.formValidate,"author",t)},expression:"formValidate.author"}})],1),e._v(" "),l("FormItem",[l("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("确认")]),e._v(" "),l("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("取消")])],1)],1)],1)],2)},[],!1,null,null,null);t.default=component.exports}}]);